<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p131" style="overflow: hidden; position: relative; background-color: white; width: 714px; height: 1017px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_131{left:65px;bottom:947px;letter-spacing:0.06px;word-spacing:0.87px;}
#t2_131{left:65px;bottom:898px;letter-spacing:0.11px;word-spacing:0.54px;}
#t3_131{left:65px;bottom:876px;letter-spacing:0.13px;word-spacing:-0.3px;}
#t4_131{left:338px;bottom:808px;}
#t5_131{left:422px;bottom:780px;}
#t6_131{left:483px;bottom:721px;}
#t7_131{left:496px;bottom:648px;}
#t8_131{left:422px;bottom:516px;}
#t9_131{left:338px;bottom:489px;}
#ta_131{left:483px;bottom:576px;}
#tb_131{left:194px;bottom:576px;}
#tc_131{left:178px;bottom:648px;}
#td_131{left:190px;bottom:721px;letter-spacing:-0.25px;}
#te_131{left:249px;bottom:780px;letter-spacing:-0.25px;}
#tf_131{left:253px;bottom:516px;}
#tg_131{left:389px;bottom:838px;}
#th_131{left:147px;bottom:601px;}
#ti_131{left:480px;bottom:780px;}
#tj_131{left:143px;bottom:686px;}
#tk_131{left:279px;bottom:459px;}
#tl_131{left:193px;bottom:781px;}
#tm_131{left:532px;bottom:686px;}
#tn_131{left:182px;bottom:516px;}
#to_131{left:485px;bottom:516px;}
#tp_131{left:284px;bottom:838px;}
#tq_131{left:381px;bottom:459px;}
#tr_131{left:532px;bottom:611px;}
#ts_131{left:83px;bottom:411px;letter-spacing:0.11px;word-spacing:1.57px;}
#tt_131{left:65px;bottom:390px;letter-spacing:0.15px;word-spacing:2.04px;}
#tu_131{left:65px;bottom:368px;letter-spacing:0.14px;word-spacing:1.13px;}
#tv_131{left:65px;bottom:346px;letter-spacing:0.16px;word-spacing:-0.03px;}
#tw_131{left:65px;bottom:324px;letter-spacing:0.14px;word-spacing:0.11px;}
#tx_131{left:65px;bottom:302px;letter-spacing:0.18px;word-spacing:-0.4px;}
#ty_131{left:83px;bottom:280px;letter-spacing:0.12px;word-spacing:-0.82px;}
#tz_131{left:65px;bottom:258px;letter-spacing:0.17px;word-spacing:0.07px;}
#t10_131{left:65px;bottom:236px;letter-spacing:0.12px;word-spacing:-0.92px;}
#t11_131{left:65px;bottom:214px;letter-spacing:0.21px;word-spacing:-0.48px;}
#t12_131{left:83px;bottom:192px;letter-spacing:0.12px;word-spacing:0.8px;}
#t13_131{left:65px;bottom:170px;letter-spacing:0.15px;word-spacing:-0.64px;}
#t14_131{left:65px;bottom:148px;letter-spacing:0.1px;word-spacing:-0.47px;}
#t15_131{left:65px;bottom:127px;letter-spacing:0.13px;word-spacing:-0.3px;}
#t16_131{left:65px;bottom:63px;letter-spacing:-0.04px;}

.s0_131{font-size:15px;font-family:CharterITC-Italic_90p;color:#000;}
.s1_131{font-size:15px;font-family:CharterITC-Regular_90v;color:#000;}
.s2_131{font-size:13px;font-family:Verdana_1pw;color:#000;}
.s3_131{font-size:13px;font-family:Verdana-Bold_1px;color:#FFF;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts131" type="text/css" >

@font-face {
	font-family: CharterITC-Italic_90p;
	src: url("fonts/CharterITC-Italic_90p.woff") format("woff");
}

@font-face {
	font-family: CharterITC-Regular_90v;
	src: url("fonts/CharterITC-Regular_90v.woff") format("woff");
}

@font-face {
	font-family: Verdana-Bold_1px;
	src: url("fonts/Verdana-Bold_1px.woff") format("woff");
}

@font-face {
	font-family: Verdana_1pw;
	src: url("fonts/Verdana_1pw.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg131Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg131" style="-webkit-user-select: none;"><object width="714" height="1017" data="131/131.svg" type="image/svg+xml" id="pdf131" style="width:714px; height:1017px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_131" class="t s0_131">Глава 3. Структуры хранения данных </span>
<span id="t2_131" class="t s1_131">количество меток, соответствующее его мощности, — такой подход использует- </span>
<span id="t3_131" class="t s1_131">ся, например, в распределённой файловой системе Ceph: </span>
<span id="t4_131" class="t s2_131">0 </span>
<span id="t5_131" class="t s2_131">1 </span>
<span id="t6_131" class="t s2_131">2 </span>
<span id="t7_131" class="t s2_131">3 </span>
<span id="t8_131" class="t s2_131">5 </span>
<span id="t9_131" class="t s2_131">6 </span>
<span id="ta_131" class="t s2_131">4 </span><span id="tb_131" class="t s2_131">8 </span>
<span id="tc_131" class="t s2_131">9 </span>
<span id="td_131" class="t s2_131">10 </span>
<span id="te_131" class="t s2_131">11 </span>
<span id="tf_131" class="t s2_131">7 </span>
<span id="tg_131" class="t s3_131">0 </span>
<span id="th_131" class="t s3_131">2 </span>
<span id="ti_131" class="t s3_131">3 </span>
<span id="tj_131" class="t s3_131">4 </span>
<span id="tk_131" class="t s3_131">0 </span>
<span id="tl_131" class="t s3_131">0 </span>
<span id="tm_131" class="t s3_131">1 </span>
<span id="tn_131" class="t s3_131">1 </span><span id="to_131" class="t s3_131">2 </span>
<span id="tp_131" class="t s3_131">2 </span>
<span id="tq_131" class="t s3_131">3 </span>
<span id="tr_131" class="t s3_131">4 </span>
<span id="ts_131" class="t s1_131">На рисунке видно, что при потере узла 4 его данные будут равномерно рас- </span>
<span id="tt_131" class="t s1_131">пределены между узлами 1 и 2, а остальные данные не потребуют перемеще- </span>
<span id="tu_131" class="t s1_131">ния. Метки узлов располагаются на окружности в псевдослучайном порядке — </span>
<span id="tv_131" class="t s1_131">в противном случае независимо от количества меток у каждого узла все данные </span>
<span id="tw_131" class="t s1_131">с потерянного узла переезжали бы на предыдущий, а добавление узла разгружа- </span>
<span id="tx_131" class="t s1_131">ло бы единственный узел. </span>
<span id="ty_131" class="t s1_131">В отличие от справедливого распределения, алгоритм согласованного хеширо- </span>
<span id="tz_131" class="t s1_131">вания позволяет перестроить карту меток независимо на каждом узле кластера. </span>
<span id="t10_131" class="t s1_131">Для этого необходимо, чтобы генератор меток узлов кластера работал одинаково </span>
<span id="t11_131" class="t s1_131">на всех узлах. </span>
<span id="t12_131" class="t s1_131">Если фрагменту нужно назначить не один узел, а несколько (основной и, на- </span>
<span id="t13_131" class="t s1_131">пример, два резервных), то в качестве резервных следует взять узлы, метки кото- </span>
<span id="t14_131" class="t s1_131">рых стоят на окружности следующими. Так, на рисунке выше фрагменту 4 основ- </span>
<span id="t15_131" class="t s1_131">ным назначен узел 4, а резервными узлами будут назначены 1 и 3. </span>
<span id="t16_131" class="t s1_131">130 </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
