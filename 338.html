<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p338" style="overflow: hidden; position: relative; background-color: white; width: 714px; height: 1017px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_338{left:390px;bottom:947px;letter-spacing:0.11px;word-spacing:1.77px;}
#t2_338{left:87px;bottom:898px;letter-spacing:0.15px;word-spacing:1.53px;}
#t3_338{left:87px;bottom:876px;letter-spacing:0.12px;word-spacing:-0.77px;}
#t4_338{left:87px;bottom:854px;letter-spacing:0.14px;}
#t5_338{left:105px;bottom:832px;letter-spacing:0.12px;word-spacing:-0.53px;}
#t6_338{left:87px;bottom:810px;letter-spacing:0.13px;word-spacing:-0.31px;}
#t7_338{left:107px;bottom:788px;letter-spacing:0.11px;word-spacing:0.64px;}
#t8_338{left:123px;bottom:766px;letter-spacing:0.14px;word-spacing:-0.73px;}
#t9_338{left:123px;bottom:745px;letter-spacing:0.12px;word-spacing:-0.59px;}
#ta_338{left:123px;bottom:723px;letter-spacing:0.13px;word-spacing:-0.3px;}
#tb_338{left:107px;bottom:701px;letter-spacing:0.12px;word-spacing:1.97px;}
#tc_338{left:123px;bottom:679px;letter-spacing:0.12px;word-spacing:0.77px;}
#td_338{left:123px;bottom:657px;letter-spacing:0.1px;word-spacing:-0.26px;}
#te_338{left:105px;bottom:635px;letter-spacing:0.11px;word-spacing:-0.82px;}
#tf_338{left:87px;bottom:613px;letter-spacing:0.13px;word-spacing:-0.42px;}
#tg_338{left:87px;bottom:591px;letter-spacing:0.15px;word-spacing:0.41px;}
#th_338{left:87px;bottom:569px;letter-spacing:0.13px;word-spacing:0.13px;}
#ti_338{left:87px;bottom:547px;letter-spacing:0.13px;word-spacing:-0.27px;}
#tj_338{left:87px;bottom:479px;letter-spacing:0.11px;word-spacing:-0.3px;}
#tk_338{left:105px;bottom:436px;letter-spacing:0.13px;word-spacing:-0.09px;}
#tl_338{left:87px;bottom:414px;letter-spacing:0.15px;word-spacing:3.59px;}
#tm_338{left:87px;bottom:392px;letter-spacing:0.14px;word-spacing:1.58px;}
#tn_338{left:87px;bottom:370px;letter-spacing:0.14px;}
#to_338{left:105px;bottom:348px;letter-spacing:0.12px;word-spacing:-0.77px;}
#tp_338{left:87px;bottom:326px;letter-spacing:0.09px;word-spacing:1.08px;}
#tq_338{left:87px;bottom:304px;letter-spacing:0.16px;word-spacing:-0.63px;}
#tr_338{left:87px;bottom:282px;letter-spacing:0.12px;word-spacing:-0.55px;}
#ts_338{left:87px;bottom:260px;letter-spacing:0.16px;word-spacing:-0.36px;}
#tt_338{left:105px;bottom:238px;letter-spacing:0.14px;word-spacing:2.88px;}
#tu_338{left:87px;bottom:216px;letter-spacing:0.13px;word-spacing:1.13px;}
#tv_338{left:87px;bottom:194px;letter-spacing:0.15px;word-spacing:1.21px;}
#tw_338{left:87px;bottom:173px;letter-spacing:0.16px;word-spacing:-0.37px;}
#tx_338{left:105px;bottom:151px;letter-spacing:0.14px;word-spacing:0.2px;}
#ty_338{left:87px;bottom:129px;letter-spacing:0.08px;}
#tz_338{left:625px;bottom:63px;letter-spacing:-0.06px;}

.s0_338{font-size:15px;font-family:CharterITC-Italic_90p;color:#000;}
.s1_338{font-size:15px;font-family:CharterITC-Regular_90v;color:#000;}
.s2_338{font-size:18px;font-family:FranklinGothicCondITC-Medi_90d;color:#000;}
.t.v0_338{transform:scaleX(0.9);}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts338" type="text/css" >

@font-face {
	font-family: CharterITC-Italic_90p;
	src: url("fonts/CharterITC-Italic_90p.woff") format("woff");
}

@font-face {
	font-family: CharterITC-Regular_90v;
	src: url("fonts/CharterITC-Regular_90v.woff") format("woff");
}

@font-face {
	font-family: FranklinGothicCondITC-Medi_90d;
	src: url("fonts/FranklinGothicCondITC-Medi_90d.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg338Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg338" style="-webkit-user-select: none;"><object width="714" height="1017" data="338/338.svg" type="image/svg+xml" id="pdf338" style="width:714px; height:1017px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_338" class="t s0_338">8.5. Компенсация несогласованности </span>
<span id="t2_338" class="t s1_338">доступность целевых узлов и при первой возможности передают им сохранён- </span>
<span id="t3_338" class="t s1_338">ные для них данные. Этот механизм называется направленной передачей (hinted </span>
<span id="t4_338" class="t s1_338">handoff). </span>
<span id="t5_338" class="t s1_338">Компенсационные механизмы не гарантируют ни надёжности записи, ни кор- </span>
<span id="t6_338" class="t s1_338">ректного чтения: </span>
<span id="t7_338" class="t s1_338">• Узлы-заместители какое-то время пытаются передать сохранённые данные </span>
<span id="t8_338" class="t s1_338">целевым узлам, но если в течение заданного времени это не удалось, то они </span>
<span id="t9_338" class="t s1_338">попросту стирают чужие данные. Таким образом записанные данные могут </span>
<span id="ta_338" class="t s1_338">быть просто потеряны. </span>
<span id="tb_338" class="t s1_338">• Читающие сеансы ищут данные на тех узлах, где эти данные должны на- </span>
<span id="tc_338" class="t s1_338">ходиться; если данные находятся на узле-заместителе, то читающий сеанс </span>
<span id="td_338" class="t s1_338">о них просто не узнает. </span>
<span id="te_338" class="t s1_338">Подход с нестрогим кворумом обычно применяется в двухуровневых системах </span>
<span id="tf_338" class="t s1_338">обработки пользовательских запросов, где первый уровень, непосредственно ра- </span>
<span id="tg_338" class="t s1_338">ботающий с клиентом, обеспечивает постоянную доступность (но с возможной </span>
<span id="th_338" class="t s1_338">потерей данных), а второй уровень гарантирует надёжность хранения (но с воз- </span>
<span id="ti_338" class="t s1_338">можными прерываниями сервиса). </span>
<span id="tj_338" class="t v0_338 s2_338">Восстановление данных и дерево Меркла </span>
<span id="tk_338" class="t s1_338">В платформах, спроектированых с учётом возможной несогласованности дан- </span>
<span id="tl_338" class="t s1_338">ных, реализованы механизмы восстановления (anti-entropy). Восстановление </span>
<span id="tm_338" class="t s1_338">может быть реактивным (по требованию) или проактивным, то есть опережа- </span>
<span id="tn_338" class="t s1_338">ющим. </span>
<span id="to_338" class="t s1_338">Реактивное восстановление происходит при чтении данных (read repair). Если </span>
<span id="tp_338" class="t s1_338">читающий сеанс указывает, что для чтения необходим кворум из более чем од- </span>
<span id="tq_338" class="t s1_338">ного узла, база считывает данные с нужного количества узлов и выбирает из них </span>
<span id="tr_338" class="t s1_338">самые новые. При обнаружении на каком-то узле устаревших данных читающий </span>
<span id="ts_338" class="t s1_338">сеанс перезапишет их актуальной версией. </span>
<span id="tt_338" class="t s1_338">Проактивное восстановление инициируется или фоновым процессом (Riak </span>
<span id="tu_338" class="t s1_338">KV), или администратором БД (Apache Cassandra). Во время проактивного вос- </span>
<span id="tv_338" class="t s1_338">становления сравниваются данные на разных узлах, и если найдены различия, </span>
<span id="tw_338" class="t s1_338">то устаревшая версия заменяется актуальной. </span>
<span id="tx_338" class="t s1_338">Для уменьшения трафика между узлами используется дерево Меркла (Merkle </span>
<span id="ty_338" class="t s1_338">tree). </span>
<span id="tz_338" class="t s1_338">337 </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
