<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p192" style="overflow: hidden; position: relative; background-color: white; width: 714px; height: 1017px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_192{left:454px;bottom:947px;letter-spacing:0.14px;word-spacing:1.73px;}
#t2_192{left:105px;bottom:898px;letter-spacing:-0.03px;word-spacing:0.82px;}
#t3_192{left:87px;bottom:876px;letter-spacing:-0.04px;word-spacing:2.58px;}
#t4_192{left:87px;bottom:854px;letter-spacing:-0.02px;word-spacing:1.85px;}
#t5_192{left:87px;bottom:832px;letter-spacing:-0.01px;word-spacing:1.66px;}
#t6_192{left:87px;bottom:810px;letter-spacing:-0.02px;word-spacing:1.38px;}
#t7_192{left:597px;bottom:810px;letter-spacing:-0.04px;}
#t8_192{left:87px;bottom:788px;letter-spacing:-0.05px;word-spacing:0.22px;}
#t9_192{left:87px;bottom:766px;letter-spacing:-0.02px;word-spacing:0.84px;}
#ta_192{left:332px;bottom:766px;letter-spacing:-0.04px;}
#tb_192{left:406px;bottom:766px;letter-spacing:-0.02px;word-spacing:0.84px;}
#tc_192{left:87px;bottom:745px;letter-spacing:-0.02px;word-spacing:-0.21px;}
#td_192{left:412px;bottom:745px;}
#te_192{left:419px;bottom:745px;word-spacing:-0.23px;}
#tf_192{left:105px;bottom:723px;letter-spacing:0.11px;word-spacing:0.43px;}
#tg_192{left:87px;bottom:701px;letter-spacing:0.13px;word-spacing:-0.18px;}
#th_192{left:87px;bottom:679px;letter-spacing:0.12px;word-spacing:1.12px;}
#ti_192{left:87px;bottom:657px;letter-spacing:0.11px;word-spacing:-0.26px;}
#tj_192{left:105px;bottom:635px;letter-spacing:0.15px;word-spacing:1.67px;}
#tk_192{left:87px;bottom:613px;letter-spacing:0.09px;word-spacing:-0.32px;}
#tl_192{left:87px;bottom:591px;letter-spacing:0.15px;word-spacing:-0.34px;}
#tm_192{left:387px;bottom:591px;letter-spacing:0.11px;}
#tn_192{left:421px;bottom:591px;letter-spacing:0.19px;word-spacing:-0.41px;}
#to_192{left:478px;bottom:591px;letter-spacing:0.1px;word-spacing:-0.26px;}
#tp_192{left:622px;bottom:591px;}
#tq_192{left:107px;bottom:570px;letter-spacing:-0.15px;}
#tr_192{left:121px;bottom:556px;letter-spacing:-0.15px;word-spacing:3.42px;}
#ts_192{left:107px;bottom:542px;letter-spacing:-0.15px;}
#tt_192{left:121px;bottom:529px;letter-spacing:-0.15px;word-spacing:3.42px;}
#tu_192{left:196px;bottom:529px;letter-spacing:-0.15px;}
#tv_192{left:237px;bottom:529px;letter-spacing:-0.15px;}
#tw_192{left:271px;bottom:529px;letter-spacing:-0.15px;}
#tx_192{left:306px;bottom:529px;letter-spacing:-0.15px;word-spacing:3.42px;}
#ty_192{left:395px;bottom:529px;letter-spacing:-0.15px;}
#tz_192{left:415px;bottom:529px;letter-spacing:-0.15px;}
#t10_192{left:107px;bottom:513px;letter-spacing:-0.15px;word-spacing:3.42px;}
#t11_192{left:105px;bottom:485px;letter-spacing:0.12px;word-spacing:1.12px;}
#t12_192{left:87px;bottom:463px;letter-spacing:0.14px;word-spacing:-0.26px;}
#t13_192{left:87px;bottom:441px;letter-spacing:0.14px;word-spacing:-0.32px;}
#t14_192{left:105px;bottom:419px;letter-spacing:0.12px;word-spacing:-0.38px;}
#t15_192{left:87px;bottom:397px;letter-spacing:0.13px;word-spacing:0.97px;}
#t16_192{left:87px;bottom:376px;letter-spacing:0.12px;word-spacing:2.16px;}
#t17_192{left:87px;bottom:354px;letter-spacing:0.09px;word-spacing:-0.21px;}
#t18_192{left:176px;bottom:319px;letter-spacing:0.19px;}
#t19_192{left:281px;bottom:319px;letter-spacing:0.25px;}
#t1a_192{left:456px;bottom:319px;letter-spacing:0.22px;word-spacing:-0.25px;}
#t1b_192{left:96px;bottom:293px;letter-spacing:0.16px;}
#t1c_192{left:176px;bottom:293px;}
#t1d_192{left:281px;bottom:293px;letter-spacing:0.19px;word-spacing:-0.25px;}
#t1e_192{left:456px;bottom:293px;letter-spacing:0.18px;word-spacing:-0.23px;}
#t1f_192{left:96px;bottom:266px;letter-spacing:0.18px;}
#t1g_192{left:176px;bottom:258px;}
#t1h_192{left:281px;bottom:266px;letter-spacing:0.16px;word-spacing:-0.25px;}
#t1i_192{left:456px;bottom:266px;letter-spacing:0.15px;word-spacing:-0.23px;}
#t1j_192{left:96px;bottom:249px;letter-spacing:0.17px;word-spacing:-0.22px;}
#t1k_192{left:281px;bottom:249px;letter-spacing:0.15px;word-spacing:-0.23px;}
#t1l_192{left:456px;bottom:249px;}
#t1m_192{left:460px;bottom:248px;letter-spacing:0.09px;}
#t1n_192{left:619px;bottom:249px;}
#t1o_192{left:96px;bottom:215px;letter-spacing:0.2px;}
#t1p_192{left:176px;bottom:222px;letter-spacing:0.18px;word-spacing:-0.22px;}
#t1q_192{left:281px;bottom:215px;letter-spacing:0.18px;}
#t1r_192{left:309px;bottom:222px;}
#t1s_192{left:456px;bottom:215px;letter-spacing:0.18px;}
#t1t_192{left:495px;bottom:222px;}
#t1u_192{left:501px;bottom:215px;letter-spacing:0.16px;word-spacing:-0.21px;}
#t1v_192{left:578px;bottom:222px;}
#t1w_192{left:176px;bottom:205px;letter-spacing:0.19px;}
#t1x_192{left:87px;bottom:168px;}
#t1y_192{left:102px;bottom:163px;letter-spacing:0.11px;word-spacing:-0.24px;}
#t1z_192{left:87px;bottom:151px;}
#t20_192{left:102px;bottom:145px;letter-spacing:0.11px;word-spacing:-0.26px;}
#t21_192{left:87px;bottom:134px;}
#t22_192{left:102px;bottom:128px;letter-spacing:0.11px;word-spacing:-0.25px;}
#t23_192{left:625px;bottom:63px;letter-spacing:-0.42px;}

.s0_192{font-size:15px;font-family:CharterITC-Italic_90p;color:#000;}
.s1_192{font-size:15px;font-family:CharterITC-Regular_90v;color:#000;}
.s2_192{font-size:15px;font-family:Iosevka-Custom_901;color:#000;}
.s3_192{font-size:14px;font-family:Iosevka-Custom-Bold_8-q;color:#000;}
.s4_192{font-size:14px;font-family:Iosevka-Custom_901;color:#000;}
.s5_192{font-size:14px;font-family:FranklinGothicCondITC-Medi_90d;color:#000;}
.s6_192{font-size:14px;font-family:FranklinGothicCondITC-Book_8-k;color:#000;}
.s7_192{font-size:15px;font-family:Iosevka-Custom-Condensed_8-8;color:#000;}
.s8_192{font-size:10px;font-family:FranklinGothicCondITC-Book_8-k;color:#000;}
.s9_192{font-size:9px;font-family:CharterITC-Regular_90v;color:#000;}
.sa_192{font-size:12px;font-family:CharterITC-Regular_90v;color:#000;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts192" type="text/css" >

@font-face {
	font-family: CharterITC-Italic_90p;
	src: url("fonts/CharterITC-Italic_90p.woff") format("woff");
}

@font-face {
	font-family: CharterITC-Regular_90v;
	src: url("fonts/CharterITC-Regular_90v.woff") format("woff");
}

@font-face {
	font-family: FranklinGothicCondITC-Book_8-k;
	src: url("fonts/FranklinGothicCondITC-Book_8-k.woff") format("woff");
}

@font-face {
	font-family: FranklinGothicCondITC-Medi_90d;
	src: url("fonts/FranklinGothicCondITC-Medi_90d.woff") format("woff");
}

@font-face {
	font-family: Iosevka-Custom-Bold_8-q;
	src: url("fonts/Iosevka-Custom-Bold_8-q.woff") format("woff");
}

@font-face {
	font-family: Iosevka-Custom-Condensed_8-8;
	src: url("fonts/Iosevka-Custom-Condensed_8-8.woff") format("woff");
}

@font-face {
	font-family: Iosevka-Custom_901;
	src: url("fonts/Iosevka-Custom_901.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg192Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg192" style="-webkit-user-select: none;"><object width="714" height="1017" data="192/192.svg" type="image/svg+xml" id="pdf192" style="width:714px; height:1017px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_192" class="t s0_192">4.3. Оптимизация запросов </span>
<span id="t2_192" class="t s1_192">Синтаксически подсказка в Oracle представляет собой комментарий специаль- </span>
<span id="t3_192" class="t s1_192">ного вида, начинающийся со знака «+». Подсказка может управлять порядком </span>
<span id="t4_192" class="t s1_192">соединения, явно указывать алгоритмы соединения, предписывать полный про- </span>
<span id="t5_192" class="t s1_192">смотр таблицы или доступ с использованием индекса, управлять параллельным </span>
<span id="t6_192" class="t s1_192">исполнением запроса... В частности, в приведённом примере подсказка </span><span id="t7_192" class="t s2_192">ORDERED </span>
<span id="t8_192" class="t s1_192">сообщает оптимизатору, что таблицы надо соединять именно в том порядке, в ка- </span>
<span id="t9_192" class="t s1_192">ком они перечислены в запросе, а </span><span id="ta_192" class="t s2_192">USE_NL(I) </span><span id="tb_192" class="t s1_192">предписывает при соединении таб- </span>
<span id="tc_192" class="t s1_192">лицы instrument, переименованной в запросе в </span><span id="td_192" class="t s2_192">i</span><span id="te_192" class="t s1_192">, использовать вложенные циклы. </span>
<span id="tf_192" class="t s1_192">Подсказка в MySQL — тоже комментарий, начинающийся с плюса, но ключе- </span>
<span id="tg_192" class="t s1_192">вые слова в нём иные, чем в Oracle. Если запрос корректен с точки зрения обеих </span>
<span id="th_192" class="t s1_192">платформ, то он будет выполнен и там, и там, но каждый оптимизатор увидит </span>
<span id="ti_192" class="t s1_192">лишь свои подсказки. </span>
<span id="tj_192" class="t s1_192">В Microsoft SQL Server подсказки встраиваются в SQL-оператор, поэтому за- </span>
<span id="tk_192" class="t s1_192">прос с подсказкой другой платформой понят не будет. В рассматриваемом запро- </span>
<span id="tl_192" class="t s1_192">се к подсказкам относятся ключевое слово </span><span id="tm_192" class="t s2_192">LOOP </span><span id="tn_192" class="t s1_192">и фраза </span><span id="to_192" class="t s2_192">OPTION (FORCE ORDER)</span><span id="tp_192" class="t s1_192">: </span>
<span id="tq_192" class="t s3_192">select </span>
<span id="tr_192" class="t s4_192">m.name, i.name </span>
<span id="ts_192" class="t s3_192">from </span>
<span id="tt_192" class="t s4_192">musician m </span><span id="tu_192" class="t s3_192">inner </span><span id="tv_192" class="t s4_192">LOOP </span><span id="tw_192" class="t s3_192">join </span><span id="tx_192" class="t s4_192">instrument i </span><span id="ty_192" class="t s3_192">on </span><span id="tz_192" class="t s4_192">m.instr_id=i.id </span>
<span id="t10_192" class="t s4_192">OPTION (FORCE ORDER) </span>
<span id="t11_192" class="t s1_192">Наконец, некоторые платформы позволяют создать план запроса и принуди- </span>
<span id="t12_192" class="t s1_192">тельно закрепить его в кеше запросов, чтобы оптимизатор использовал готовый </span>
<span id="t13_192" class="t s1_192">план, а не строил новый. </span>
<span id="t14_192" class="t s1_192">Надо ли говорить, что интерфейсы ручного управления запросами и даже тер- </span>
<span id="t15_192" class="t s1_192">мины (за исключением hints), применяемые для описанных выше механизмов, </span>
<span id="t16_192" class="t s1_192">отличаются от платформы к платформе. Ниже приведена сводная таблица ис- </span>
<span id="t17_192" class="t s1_192">пользуемых терминов. </span>
<span id="t18_192" class="t s5_192">Параметры </span><span id="t19_192" class="t s5_192">Подсказки </span><span id="t1a_192" class="t s5_192">Хранимые планы </span>
<span id="t1b_192" class="t s6_192">Oracle </span><span id="t1c_192" class="t s6_192">— </span><span id="t1d_192" class="t s6_192">Hints (comments) </span><span id="t1e_192" class="t s6_192">SQL Plan Baseline </span>
<span id="t1f_192" class="t s6_192">Microsoft </span>
<span id="t1g_192" class="t s6_192">— </span>
<span id="t1h_192" class="t s6_192">Hints (query hints, join hints, </span><span id="t1i_192" class="t s6_192">Forcing a particular plan </span>
<span id="t1j_192" class="t s6_192">SQL Server </span><span id="t1k_192" class="t s6_192">table hints) </span><span id="t1l_192" class="t s6_192">(</span><span id="t1m_192" class="t s7_192">sp_query_store_force_plan</span><span id="t1n_192" class="t s6_192">) </span>
<span id="t1o_192" class="t s6_192">PostgreSQL </span>
<span id="t1p_192" class="t s6_192">Planner Method </span>
<span id="t1q_192" class="t s6_192">Hints </span>
<span id="t1r_192" class="t s8_192">1 </span>
<span id="t1s_192" class="t s6_192">Outline </span>
<span id="t1t_192" class="t s8_192">2 </span>
<span id="t1u_192" class="t s6_192" data-mappings='[[7,"fi"]]'>; Speciﬁc plan </span>
<span id="t1v_192" class="t s8_192">3 </span>
<span id="t1w_192" class="t s6_192" data-mappings='[[3,"fi"]]'>Conﬁguration </span>
<span id="t1x_192" class="t s9_192">1 </span>
<span id="t1y_192" class="t sa_192">Реализованы в расширении pg_hint_plan. </span>
<span id="t1z_192" class="t s9_192">2 </span>
<span id="t20_192" class="t sa_192">Реализованы в расширении pg_outline. </span>
<span id="t21_192" class="t s9_192">3 </span>
<span id="t22_192" class="t sa_192">Реализованы в расширении sr_plan. </span>
<span id="t23_192" class="t s1_192">191 </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
